{% extends "base.html" %}
{% load i18n %}

{% block content %}
<h3 class="mb-3">{% trans "Управление разделами" %}</h3>
<div class="mb-3">
    <a href="{% url 'create_section' %}" class="btn btn-success">+ {% trans "Добавить раздел" %}</a>
</div>

{% if sections %}
<table class="table table-striped shadow-sm">
    <thead>
        <tr>
            <th>№</th>
            <th>{% trans "Название" %}</th>
            <th>{% trans "Описание" %}</th>
            <th class="text-end">{% trans "Действия" %}</th>
        </tr>
    </thead>
    <tbody>
        {% for section in sections %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ section.title }}</td>
            <td class="text-muted">{{ section.description|truncatewords:15 }}</td>
            <td class="text-end">
                <a href="{% url 'section_detail' section.id %}" class="btn btn-outline-success btn-sm">{% trans "Просмотреть" %}</a>

                <a href="{% url 'edit_section' section.id %}" class="btn btn-outline-primary btn-sm">{% trans "Редактировать" %}</a>

                <form action="{% url 'delete_section' section.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-danger btn-sm"
                            onclick="return confirm('{% trans "Вы уверены, что хотите удалить этот раздел?" %}')">
                        {% trans "Удалить" %}
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info">
    {% trans "Пока нет ни одного раздела." %}
</div>
{% endif %}
{% endblock %}
